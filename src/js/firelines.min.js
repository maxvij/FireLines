function getWarningsForTitle(e){var t=[{keyword:"Reanimatie",text:"Reanimatie, houdt de 'Hartstichting App' in de gaten."},{keyword:"Buitenbrand",text:"Pas op! Adem geen rook in, blijf uit de buurt van het vuur."},{keyword:"Binnenbrand",text:""},{keyword:"Dier",text:"Haha, dom dier."},{keyword:"Wateroverlast",text:"Neem je zwembroek mee!"},{keyword:"Gas",text:"Houd afstand en probeer niets in te ademen."},{keyword:"Oefening",text:"Geen zorgen, niets aan de hand."}],i=[];return t.map(function(t){-1!==e.toLowerCase().indexOf(t.keyword.toLowerCase())&&i.push(t.text)}),i}function toggleProvincesList(e){}function highlightListItem(e){var t=document.getElementById("list-"+e);t.setAttribute("class","highlighted"),highlightedListItemId=e}function unhighlightListItem(e){var t=document.getElementById("list-"+e);t.setAttribute("class",""),highlightedListItemId=0}function highlightCircle(e){var t=document.getElementById("circle-"+e),i=coordinates[0].id,n=document.getElementById("circle-"+i);void 0!==n&&null!==n&&n.setAttribute("style","animation: none"),void 0!==t&&null!==t&&t.setAttribute("style","transform: scale(2); transform-origin: center center; animation: bounce 1s ease-in-out infinite; -moz-animation: none;")}function unhighlightCircle(e){var t=document.getElementById("circle-"+e),i=coordinates[0].id,n=document.getElementById("circle-"+i);void 0!==n&&null!==n&&n.setAttribute("style",""),void 0!==t&&null!==t&&t.setAttribute("style","transform: scale(1); transform-origin: center center;")}function showTooltip(e,t,i,n){highlightListItem(e),tooltip.setAttribute("class","show");var r=Date.parse(n);r=r.toString("d MMM yyyy HH:mm");var o=getWarningsForTitle(t).length>0?'<p class="warning ion-android-warning">'+getWarningsForTitle(t).join("<br />")+"</p>":"";tooltip.innerHTML='<div class="tooltip-inner prio-'+i+'"><p class="label prio-'+i+'"</p><p class="date">'+r+'</p><p class="title">'+t+"</p>"+o+"</div>"}function hideTooltip(){tooltip.setAttribute("class","hide"),unhighlightListItem(highlightedListItemId)}function toRelativeCoordinate(e,t){var i,n=580,r=8257,o=278013,a=675,s=615084,l=306877;return i="x"===e?(t-r)*((0-n)/(r-o)):(t-s)*((0-a)/(s-l))}function isNumber(e){return!isNaN(parseFloat(e))}function getClassForPrio(e){return isNumber(e)?"prio-"+e:"prio-1"}function updateData(){var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e.onreadystatechange=function(){if(4===this.readyState&&200===this.status&&"UP-TO-DATE"!==this.responseText&&-1===this.responseText.indexOf("Connection failed")){if(data=JSON.parse(this.response),1===data.length||2===data.length){var e=new Audio("src/sound/brand.mp3");e.play()}var t=[];t=data.map(function(e){var t={};return t.id=e.ID,t.x=toRelativeCoordinate("x",parseInt(e.rdx)),t.y=toRelativeCoordinate("y",parseInt(e.rdy)),t.title=e.Title,t.prio=e.prio,t.province=e.Province,t.time=e.Pubdate.substr(e.Pubdate.length-8),t.date=e.Pubdate,lastid=e.ID,t}),t=t.sort(function(e,t){return t.id-e.id}),coordinates=coordinates.concat(t),updateGraph(t),dataLoaded=!0}},e.open("GET","get_coordinates.php?lastid="+lastid),e.send()}function initDateFilter(){for(var e=document.getElementsByClassName("pill"),t=0;t<e.length;t++)e[t].firstElementChild.checked===!0&&(activeDateValue=t+1),e[t].addEventListener("click",function(e){activeDateValue=e.target.value;var t;t="1"===activeDateValue?"Latest reports of all time":"2"===activeDateValue?"Reports of yesterday":"Latest repots of today",document.getElementById("latest-reports-title").innerHTML=t,resetGraph(),updateGraph()})}function updateProvincesTags(e){provincesInnerHtml=[],availableProvinces=e.map(function(e){-1!==provinceList.indexOf(e.province)||isNumber(e.province)||-1===officialProvinces.indexOf(e.province)||provinceList.push(e.province)});provinceList.map(function(e){var t=-1!==selectedProvinceList.indexOf(e)?"province-tag selected":"province-tag";provincesInnerHtml.push('<div class="'+t+'" id="province-'+e+'" onClick="javascript: selectProvince(\''+e+"')\">"+e+"</div>")});provincesDiv.innerHTML=provincesInnerHtml.join(" ")}function selectProvince(e){var t=selectedProvinceList.indexOf(e);-1===t?selectedProvinceList.push(e):selectedProvinceList.splice(t,1),resetGraph()}function resetGraph(){overlay.attr({opacity:1}).animate(150).attr({opacity:0}).after(function(){SVGoverlay.clear(),overlay=SVGoverlay.group(),updateGraph()})}function updateGraph(e){if(void 0===e)var e=coordinates;var t=0,i=30,n=coordinates.length;if(t=1)r=coordinates[0].x,o=coordinates[0].y;else var r=coordinates[n-2].x,o=coordinates[n-2].y;var a=e.length<10?150:2e3/e.length;e=e.sort(function(e,t){return t.id-e.id});var s=Date.today(),l=e;"2"===activeDateValue?s=1..days().ago():"3"===activeDateValue&&(s=Date.today()),l=l.filter(function(e){var t=new Date(e.date);return"2"===activeDateValue?t>2..days().ago()&&t<1..day().ago():"3"===activeDateValue?t>1..day().ago():!0});var d=l.filter(function(e){return parseInt(e.prio)>=parseInt(prioritySliderValues[0])&&parseInt(e.prio)<=parseInt(prioritySliderValues[1])});updateProvincesTags(d);var c=0!==selectedProvinceList.length?d.filter(function(e){return-1!==selectedProvinceList.indexOf(e.province)}):d;c=c.slice(0,maximumNumberOfReports),c=c.sort(function(e,t){return e.id-t.id});var u=c.filter(function(e){return-1===e.title.toLowerCase().indexOf("test melding")});document.getElementById("number-of-reports").innerHTML=u.length,u.map(function(e){overlay.circle(5).attr({opacity:0}).move(e.x-2.5,e.y-2.5).attr({"class":getClassForPrio(e.prio)+" small"}).animate(300,"<>",200+t*a).attr({opacity:1});var n=overlay.circle(i/e.prio);n.attr({opacity:0}).move(e.x-i/e.prio/2,e.y-i/e.prio/2).attr({"class":getClassForPrio(e.prio)}).animate(300,"<>",200+t*a).attr({opacity:1}).attr({id:"circle-"+e.id}),n.node.addEventListener("mouseout",function(){hideTooltip()}),n.node.addEventListener("mouseover",function(){showTooltip(e.id,e.title,e.prio,e.date)}),overlay.line(r,o,e.x,e.y).attr({opacity:0}).animate(300,"<>",200+t*a).attr({opacity:1}),r=e.x,o=e.y,t++}),updateList(1===c.length?coordinates:c)}function updateList(e){e=e.sort(function(e,t){return t.id-e.id});var t=document.getElementById("latest-reports"),i="",n="";e.map(function(e){var t="label prio-"+e.prio;return n='<li id="list-'+e.id+'" onmouseenter="javascript: highlightCircle('+e.id+')" onmouseleave="javascript: unhighlightCircle('+e.id+")\"><div class='"+t+"'></div><p class='name' title='"+e.title+"'>"+e.title+"</p><p class='location'>"+e.province+"</p><p class='time'>"+e.time+"</p></li>",i=i+" "+n,n}),t.innerHTML=i}function easterEgg(){document.location.href="https://www.dumpert.nl/embed/7153219/dce8872e/"}var coordinates=[],tooltip=document.getElementById("tooltip"),highlightedListItemId=0,maximumNumberOfReports=50,dataLoaded=!1;document.getElementById("number-of-reports").innerHTML=maximumNumberOfReports,document.getElementById("provinces-toggle").addEventListener("click",function(e){var t=document.getElementById("provinces");e.target.classList.contains("open")?(e.target.setAttribute("class","value ion-chevron-down"),e.target.innerHTML="Show provinces",t.setAttribute("class","")):(e.target.setAttribute("class","value ion-chevron-down open"),e.target.innerHTML="Hide provinces",t.setAttribute("class","show"))}),document.addEventListener("mousemove",function(e){var t="",i=document.getElementById("tooltip").clientHeight;t=e.clientX>window.innerWidth-320?e.clientY>window.innerHeight-200?"left: "+(e.clientX-295)+"px; top:"+(e.clientY-(i+5))+"px;":"left: "+(e.clientX-295)+"px; top:"+(e.clientY+5)+"px":e.clientY>window.innerHeight-200?"left: "+(e.clientX+5)+"px; top:"+(e.clientY-(i+5))+"px":"left: "+(e.clientX+5)+"px; top:"+(e.clientY+5)+"px",tooltip.setAttribute("style",t)});var data,lastid=0,amountSliderDiv=document.getElementById("amount-slider"),amountSliderValue=document.getElementById("amount-slider-value"),amountSlider=noUiSlider.create(amountSliderDiv,{start:[50],step:10,range:{min:[10],max:[200]}});amountSlider.on("update",function(){var e=amountSlider.get();amountSliderValue.innerHTML=parseInt(e).toFixed(0).toString()}),amountSlider.on("change",function(){var e=amountSlider.get();maximumNumberOfReports=parseInt(e).toFixed(0),document.getElementById("number-of-reports").innerHTML=maximumNumberOfReports.toString(),resetGraph()});var prioritySliderDiv=document.getElementById("priority-slider"),prioritySliderValue=document.getElementById("priority-slider-value"),prioritySlider=noUiSlider.create(prioritySliderDiv,{start:[1,3],step:1,connect:!0,range:{min:1,max:3}}),prioritySliderValues=prioritySlider.get();prioritySlider.on("update",function(){var e=prioritySlider.get(),t="";t=e[0]===e[1]?parseInt(e[0]).toFixed(0):parseInt(e[0]).toFixed(0)+"-"+parseInt(e[1]).toFixed(0),prioritySliderValue.innerHTML=t,prioritySliderValues=prioritySlider.get(),dataLoaded&&resetGraph()}),initDateFilter();var activeDateValue,provincesDiv=document.getElementById("provinces"),provinceList=[],officialProvinces=["Friesland","Drenthe","Groningen","Overijssel","Noord-Holland","Zuid-Holland","Flevoland","Utrecht","Limburg","Noord-Brabant","Gelderland","Zeeland"],availableProvinces=[],provincesInnerHtml=[],selectedProvinceList=[];setInterval(function(){updateData()},2e3);var options={type:"delayed",duration:150,animTimingFunction:Vivus.EASE,pathTimingFunction:Vivus.EASE,reverseStack:!0,start:"autostart"},vivus=new Vivus("map-svg",options),SVGoverlay=SVG("map-overlay");SVGoverlay.attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 600 400");var overlay=SVGoverlay.group(),logoDiv=document.getElementsByClassName("logo"),numberOfClicks=0;logoDiv[0].addEventListener("click",function(){numberOfClicks++,numberOfClicks>5&&easterEgg()});